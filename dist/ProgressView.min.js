(function(a,b){"use strict",typeof define=="function"&&define.amd?define(["marionette","underscore"],b):a.Marionette.ProgressView=b(a.Marionette,a._)})(this,function(a,b){"use strict";var c=a.ItemView.extend({currentIndex:0,views:[],viewContainer:null,constructor:function(){a.View.prototype.constructor.apply(this,arguments);if(!this.views)throw new Error("Views Must Be Provided");this.options.onComplete&&(this.onComplete=this.options.onComplete),this.options.viewContainer&&(this.viewContainer=this.options.viewContainer),this.on("show render",this.showView)},showView:function(){if(!this.currentView){var a=this.views[this.currentIndex];this.currentView=new a}this.currentView.render(),this.eventBinder.bindTo(this.currentView,"prev:item",this.loadPreviousView,this),this.eventBinder.bindTo(this.currentView,"next:item",this.loadNextView,this),this.eventBinder.bindTo(this.currentView,"close:progress",this.close,this),this.viewContainer?this.$(this.viewContainer).append(this.currentView.$el):this.$el.append(this.currentView.$el)},getCompletion:function(){return this.currentIndex/this.views.length*100},loadPreviousView:function(){this.currentIndex--,this.loadView()},loadNextView:function(){this.currentIndex++,this.loadView()},loadView:function(){var a=this.views.length;b.isFunction(this.onProgress)&&this.onProgress(this.getCompletion()),this.currentView.close(),this.currentView=null,a>this.currentIndex?this.showView():b.isFunction(this.onComplete)&&this.onComplete()}});return c});